@model IEnumerable<Product>

<div class="product-grid">
    @if (Model != null && Model.Any())
    {
        @foreach (var product in Model)
        {
            <div class="food-card" onclick="openProductModal(@product.Id)" style="cursor: pointer;">
                <div class="food-img-wrapper">
                    <img src="@product.ImageUrl" alt="@product.Name" class="food-img" loading="lazy">
                </div>
                <div class="food-card-content">
                    @if (product.Category != null)
                    {
                        <div class="food-category">@product.Category.Name</div>
                    }
                    <h4 class="food-title">@product.Name</h4>
                    @if (product.Restaurant != null)
                    {
                        <p class="restaurant-badge">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            </svg>
                            @product.Restaurant.Name
                        </p>
                    }
                    
                     <div class="d-flex gap-3 mb-2 text-muted small">
                        <span title="–ö–∞–ª–æ—Ä—ñ–π–Ω—ñ—Å—Ç—å">üî• @product.Calories –∫–∫–∞–ª</span>
                        <span title="–í–∞–≥–∞">‚öñÔ∏è @product.Weight –≥</span>
                    </div>

                    <p class="food-desc">@product.Description</p>
                    
                    <div class="product-badges">
                        @if (product.IsBestSeller)
                        {
                            <span class="product-badge badge-hit">–•—ñ—Ç</span>
                        }
                        @if (product.IsNew)
                        {
                            <span class="product-badge badge-new">–ù–æ–≤–∏–Ω–∫–∞</span>
                        }
                    </div>
                    <div class="food-footer">
                        <div class="food-price">@product.Price.ToString("0.00") <span style="font-size: 0.8em;">–≥—Ä–Ω</span></div>
                        
                        <form asp-controller="Cart" asp-action="AddToCart" method="post" class="add-to-cart-form" onclick="event.stopPropagation()">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="productId" value="@product.Id" />
                            <input type="hidden" name="quantity" value="1" />
                            <button type="submit" class="btn-add">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <div class="col-12">
            <div class="d-flex flex-column justify-content-center align-items-center text-center" style="min-height: 350px; padding: 40px 20px;">
                <i class="bi bi-search" style="font-size: 4rem; color: var(--text-muted); opacity: 0.3;"></i>
                <h4 class="mt-3 mb-2" style="color: var(--text-color);">–¢–æ–≤–∞—Ä—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</h4>
                <p class="text-muted mb-4" style="max-width: 300px;">–°–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–æ—à—É–∫—É –∞–±–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é</p>
                <a asp-controller="Home" asp-action="Index" class="btn" style="background: var(--primary-color); color: white; border-radius: 12px; padding: 12px 28px; font-weight: 500; display: inline-flex; align-items: center; gap: 8px;">
                    <i class="bi bi-arrow-left"></i> –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é
                </a>
            </div>
        </div>
    }
</div>
