@model IEnumerable<Product>

<div class="product-grid">
    @if (Model != null && Model.Any())
    {
        @foreach (var product in Model)
        {
            <div class="food-card" onclick="openProductModal(@product.Id)" style="cursor: pointer;">
                <div class="food-img-wrapper">
                    <img src="@product.ImageUrl" alt="@product.Name" class="food-img" loading="lazy">
                </div>
                <div class="food-card-content">
                    <h4 class="food-title">@product.Name</h4>
                    @if (product.Restaurant != null)
                    {
                        <p class="restaurant-badge">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            </svg>
                            @product.Restaurant.Name
                        </p>
                    }
                    
                     <div class="d-flex gap-3 mb-2 text-muted small">
                        <span title="–ö–∞–ª–æ—Ä—ñ–π–Ω—ñ—Å—Ç—å"><i class="bi bi-fire"></i> üî• @product.Calories –∫–∫–∞–ª</span>
                        <span title="–í–∞–≥–∞"><i class="bi bi-bag"></i> ‚öñÔ∏è @product.Weight –≥</span>
                    </div>

                    <p class="food-desc">@product.Description</p>
                    <div class="food-footer">
                        <div class="food-price">@product.Price.ToString("0.00") <span style="font-size: 0.8em;">–≥—Ä–Ω</span></div>
                        
                        <form asp-controller="Cart" asp-action="AddToCart" method="post" class="add-to-cart-form" onclick="event.stopPropagation()">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="productId" value="@product.Id" />
                            <input type="hidden" name="quantity" value="1" />
                            <button type="submit" class="btn-add">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <div class="col-12 text-center text-muted">
            <p>–¢–æ–≤–∞—Ä—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</p>
        </div>
    }
</div>
